
- name: mkdir .local
  file:
    path: "{{ home_dir }}/{{ item }}"
    state: directory
  with_items:
    - .local

- name: create .bashrc
  file:
    path: "{{ home_dir }}/.bashrc"
    state: touch
  register: touch_log
  changed_when: touch_log.diff.before.state != "file"

- name: create .local/.bashrc
  file:
    path: "{{ home_dir }}/.local/.bashrc"
    state: touch
  register: touch_log
  changed_when: touch_log.diff.before.state != "file"

- name: create .bash_profile
  file:
    path: "{{ home_dir }}/.bash_profile"
    state: touch
  register: touch_log
  changed_when: touch_log.diff.before.state != "file"

- name: create .local/.bash_profile
  file:
    path: "{{ home_dir }}/.local/.bash_profile"
    state: touch
  register: touch_log
  changed_when: touch_log.diff.before.state != "file"

- name: add .bashrc content
  blockinfile:
    dest: "{{ home_dir }}/.bashrc"
    content: |
      {{ lookup('file', '.bashrc') }}

- name: add .bash_profile content
  blockinfile:
    marker: "# {mark} ANSIBLE MANAGED BLOCK bash role"
    dest: "{{ home_dir }}/.bash_profile"
    content: |
      {{ lookup('file', '.bash_profile') }}
